<p id="notice"><%= notice %></p>

<h1>All Categories</h1>
<br>
<div class="card_index">

  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th colspan="2"></th>
      </tr>
    </thead>

    <tbody>
      <% @categories.each do |category| %>
        <% decksWording = category.decks.count == 1 ? "deck" : "decks" %>
        <% cardCount = 0 %>
        <% category.decks.each do |deck| %>
          <% cardCount += deck.cards.count %>
        <% end %>
        <% cardsWording = cardCount == 1 ? "card" : "cards" %>
        <tr>
          <td><%= category.name %></td>
          <td><%= link_to 'Edit', edit_category_path(category) %></td>
          <td><%= link_to 'Delete', category, method: :delete, data: { confirm: 
          "This category is set for #{category.decks.count} #{decksWording} and #{cardCount} #{cardsWording}.  Are you sure 
          you want to delete the '#{category.name}' category?" } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <br>

  <ul class="div_nav left">
    <li><%= link_to 'New Category', new_category_path(@category) %></li>
  </ul>
  
</div>